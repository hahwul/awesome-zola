<div {% if class %}class="{{class}}"{% endif %} id="kakao-map-{{id | default(value='map')}}" style="width:{% if width %}{{width}}{% else %}500{% endif %}px;height:{% if height %}{{height}}{% else %}400{% endif %}px;"></div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey={{api_key}}{% if libraries %}&libraries={{libraries}}{% endif %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var container = document.getElementById('kakao-map-{{id | default(value='map')}}');
    var options = {
      center: new kakao.maps.LatLng({{lat | default(value='33.450701')}}, {{lng | default(value='126.570667')}}),
      level: {{level | default(value='3')}}
    };

    var map = new kakao.maps.Map(container, options);

    {% if marker %}
    // Add a marker
    var markerPosition = new kakao.maps.LatLng({{lat | default(value='33.450701')}}, {{lng | default(value='126.570667')}});
    var marker = new kakao.maps.Marker({
      position: markerPosition
    });
    marker.setMap(map);
    {% endif %}

    {% if draggable %}
    map.setDraggable(true);
    {% endif %}

    {% if zoomable %}
    map.setZoomable(true);
    {% endif %}

    {% if controls %}
    // Add map type control
    var mapTypeControl = new kakao.maps.MapTypeControl();
    map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

    // Add zoom control
    var zoomControl = new kakao.maps.ZoomControl();
    map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
    {% endif %}
  });
</script>
